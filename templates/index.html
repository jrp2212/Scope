<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            overflow: hidden;
        }
        .icon-bg {
            background-color: #E5E7EB;
            border-radius: 0.375rem;
            padding: 0.5rem 1rem;
        }
        .sidebar-icon {
            width: 100%;
            text-align: center;
            margin-bottom: 1rem;
        }
        .sidebar-icon:last-child {
            margin-bottom: 0;
        }
        .sidebar-icon i {
            font-size: 1.5rem;
        }
        .main-content {
            max-width: 900px;
            margin: auto;
        }
        .sidebar {
            background-color: #3B82F6;
        }
        .sidebar img {
            height: 2rem;
            width: 2rem;
        }
        .rounded-circle {
            border-radius: 50% !important;
        }
        .text-blue-500 {
            color: #3B82F6;
        }
        .bg-blue-500 {
            background-color: #3B82F6;
        }
        .bg-green-500 {
            background-color: #22C55E;
        }
        .bg-red-500 {
            background-color: #EF4444;
        }
        .activity-item {
            padding-bottom: 1rem;
        }
        .activity-item:not(:last-child) {
            border-bottom: 1px solid #E5E7EB;
            margin-bottom: 1rem;
        }

        body {
            font-family: 'Inter', sans-serif;
        }
        .activity-item {
            padding: 0.5rem 0;
        }
        .activity-item:not(:last-child) {
            border-bottom: 1px solid #E5E7EB;
        }
        .activity-item > div {
            font-size: 0.9rem;
        }
        .sidebar-icon i,
        .activity-item > div > p {
            font-size: 1.2rem;
        }
        .activity-section {
            max-height: 400px;
            overflow-y: auto;
        }
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .activity-item > div {
                font-size: 0.8rem;
            }
        }

        .sidebar {
        background-color: #3B82F6;
        width: 60px;
        }
        .sidebar-icon {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 60px;
            text-decoration: none;
        }
        .sidebar-icon i {
            font-size: 3rem;
            color: white;
        }
        .sidebar a {
            text-decoration: none;
            color: inherit;
        }
        .sidebar a:hover {
            text-decoration: none;
            background-color: rgba(255, 255, 255, 0.1);
        }

        body {
        font-family: 'Inter', sans-serif;
    }
    .icon-bg {
        background-color: #E5E7EB;
        border-radius: 0.375rem;
        padding: 0.5rem 1rem;
    }
    .sidebar-icon {
        width: 100%;
        text-align: center;
        margin-bottom: 1rem;
    }
    .sidebar-icon:last-child {
        margin-bottom: 0;
    }
    .sidebar-icon i {
        font-size: 1.5rem;
        color: white;
    }
    .main-content {
        max-width: 900px;
        margin: auto;
    }
    .autocomplete-results {
      position: absolute;
      top: 100%;
      left: 10%;
      width: 80%;
      z-index: 1000;
      background: white;
      border: 1px solid #ddd;
      border-top: none;
      max-height: 300px;
      overflow-y: auto;
    }
    .result-item {
      display: flex;
      align-items: center;
      padding: 5px 10px;
      border-bottom: 1px solid #eee;
    }
    .result-item img {
      height: 30px;
      width: 30px;
      margin-right: 10px;
      object-fit: cover;
    }
    </style>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <div class="container-fluid h-100">
        <div class="row h-100">
            <!-- Sidebar -->
            <div class="col-auto sidebar d-flex flex-column align-items-stretch py-4">
                <div class="">
                    <img alt="Logo" src="/static/logo.png" style="height:40px; width:40px" />
                </div>
                <div class="nav flex-column" style="padding-top: 100px">
                    <a href="#" class="sidebar-icon text-white"><i class="fas fa-bars"></i></a>
                    <a href="#" class="sidebar-icon text-white"><i class="fas fa-search"></i></a>
                    <a href="#" class="sidebar-icon text-white"><i class="fas fa-user-friends"></i></a>
                    <a href="#" class="sidebar-icon text-white"><i class="fas fa-sync-alt"></i></a>
                    <a href="#" class="sidebar-icon text-white"><i class="fas fa-cog"></i></a>
                </div>
            </div>
            <!-- Main content -->
            <div class="col py-5 main-content">
                <h1 class="text-3xl font-semibold mb-5">What are you looking for, Christopher?</h1>
                  
                  <div class="search-container mb-5">
                    <div class="search-bar" style="position: relative;">
                      <input type="text" id="autocomplete" class="form-control" placeholder="Search..." oninput="handleAutocomplete(this.value)">
          <div id="autocomplete-results" class="autocomplete-results"></div>
                    </div>
                  </div>
                <div class="btn-group mb-5" role="group" aria-label="Basic example">
                    <button type="button" class="btn btn-outline-primary"><i class="fas fa-calendar-alt"></i> Date</button>
                    <button type="button" class="btn btn-outline-primary"><i class="fas fa-user-friends"></i> People</button>
                    <button type="button" class="btn btn-outline-primary"><i class="fas fa-database"></i> Source</button>
                </div>
                <div class="card shadow-sm p-4 activity-section">
                  <h2 class="text-xl font-semibold mb-4">Recent activity</h2>
                  <div class="row gx-2">
                      <!-- Activity Item 1 -->
                      <div class="col-12 activity-item mb-3">
                          <div class="d-flex align-items-center">
                              <div class="bg-blue-500 text-white rounded-circle h-10 w-10 d-flex align-items-center justify-content-center me-3">
                                  TS
                              </div>
                              <div>
                                  <p class="font-semibold mb-1">Teodora S.</p>
                                  <p class="text-gray-500 text-sm mb-1">5 mins ago</p>
                                  <p>Created graph describing protein creation over time (lab1_results.xls)</p>
                              </div>
                          </div>
                      </div>
                      <!-- Activity Item 2 -->
                      <div class="col-12 activity-item mb-3">
                          <div class="d-flex align-items-center">
                              <div class="bg-green-500 text-white rounded-circle h-10 w-10 d-flex align-items-center justify-content-center me-3">
                                  AL
                              </div>
                              <div>
                                  <p class="font-semibold mb-1">Austin L.</p>
                                  <p class="text-gray-500 text-sm mb-1">1 hr ago</p>
                                  <p>Contributed to new procedure for isolating Pk22 acids (drosophila_methods.docx)</p>
                              </div>
                          </div>
                      </div>
                      <!-- Activity Item 3 -->
                      <div class="col-12 activity-item">
                          <div class="d-flex align-items-center">
                              <div class="bg-red-500 text-white rounded-circle h-10 w-10 d-flex align-items-center justify-content-center me-3">
                                  JP
                              </div>
                              <div>
                                  <p class="font-semibold mb-1">Jay P.</p>
                                  <p class="text-gray-500 text-sm mb-1">2 days ago</p>
                                  <p>Began outlining deliverables for paper due next Friday (project_writeup.docx)</p>
                              </div>
                          </div>
                      </div>
                  </div>
                  <a href="#" class="text-blue-500 mt-3 d-block">See more</a>
              </div>              
            </div>
        </div>
    </div>


<script>
  function handleAutocomplete(searchTerm) {
    if (searchTerm.length === 0) {
      $('#autocomplete-results').empty();
      return;
    }
    
    $.ajax({
      url: '/autocomplete',
      type: 'POST',
      contentType: 'application/json',
      data: JSON.stringify({ term: searchTerm }),
      success: function(response) {
        $('#autocomplete-results').empty();
        
        response.results.forEach(function(item) {
          $('#autocomplete-results').append(
            `<a href="${item.link}"><div class="result-item">
              <img src="${item.image}" alt="result image">
              <span>${item.content}</span>
            </div></a>`
          );
        });
      },
      error: function(xhr, status, error) {
        console.error("Autocomplete error:", status, error);
        $('#autocomplete-results').empty();
      }
    });
  }

  $(document).on('click', function (e) {
    if (!$(e.target).closest('#autocomplete').length) {
      $('#autocomplete-results').empty();
    }
  });
</script>

<footer>
  <div class="container">
    <span>Jay Patel (jrp2212)</span> | 
    <span>Austin Liao (al3979)</span> | 
    <span>Teodora Sutilovic (ts3356)</span> | 
    <span>Christopher Lambert (cl3991)</span>
  </div>
</footer>
    
</body>
</html>