<head>
    <style> body { margin: 0; } </style>
  
    <script src="https://unpkg.com/force-graph@1.43.4/dist/force-graph.min.js"></script>
    <!--<script src="../../dist/force-graph.js"></script>-->
  </head>
  
    <div style="height: 300px;width:730px;" id="graph"></div>
  
    <script>
      const imgs = ['/static/excel.png', '/static/gmail.png', '/static/dropbox.png', '/static/file_icon.jpeg', '/static/excel.png', '/static/gmail.png', '/static/dropbox.png', '/static/file_icon.jpeg', '/static/excel.png', '/static/gmail.png', '/static/dropbox.png', '/static/file_icon.jpeg', '/static/excel.png', '/static/gmail.png', '/static/dropbox.png', '/static/file_icon.jpeg']
        .map(src => {
          const img = new Image();
          img.src = `${src}`;
          return img;
        });
  
      // Random connected graph
      const gData = {
        nodes: imgs.map((img, id) => ({ id, img })),
        links: [...Array(imgs.length).keys()]
          .filter(id => id)
          .map(id => ({
            source: id,
            target: Math.round(Math.random() * (id-1))
          }))
      };
  
      const Graph = ForceGraph()
        (document.getElementById('graph'))
        .height(300)
        .width(730)
        .nodeCanvasObject(({ img, x, y }, ctx) => {
          const size = 12;
          // console.log(img);
          if (img.src.endsWith("/static/file_icon.jpeg")){
            console.log("Ayy");
            ctx.drawImage(img, x - size / 2, y - size / 2, 24, 24);
          } else {
            // console.log(img.src);
            ctx.drawImage(img, x - size / 2, y - size / 2, size, size);
          }
          
        })
        .nodePointerAreaPaint((node, color, ctx) => {
          const size = 12;
          ctx.fillStyle = color;
          ctx.fillRect(node.x - size / 2, node.y - size / 2, size, size); // draw square as pointer trap
        })
        .onNodeClick(node => {
            // Center/zoom on node
            Graph.centerAt(node.x, node.y, 1000);
            Graph.zoom(8, 2000);
            console.log(node.img.src);
            window.location.href='/randomExplore';
        })
        .graphData(gData);
    </script>